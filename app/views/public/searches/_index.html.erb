<% if @model == 'user' %>
  <% if @records.size > 0 %>
    <h3>Users search for "<%= @content %>"</h3>
    
  <div class='row mt-5'>
    <h3>検索結果</h3>
    
    <table class="table mt-3">
      <thead>
        <tr>
          <th class="col-2">ユーザー名</th>
          <th class="col-2">フォロー数</th>
          <th class="col-2">フォロワー数</th>
          <th class="col-2">操作</th>
        </tr>
        </tr>
      </thead>
      <tbody>
        <% @records.each do |user| %>
          <tr>
            <td><%= user.username %></td>
            <td><%= user.created_at.strftime('%Y/%m/%d') %></td>
            <td><%= user.followings.count %></td>
            <td><%= user.followers.count %></td>
            <td>
           <% unless current_user == user %>
            <% if current_user.following?(user) %>
              <%= button_to 'フォロー解除', unfollow_public_user_relationships_path(user_id: user.id), method: :delete, class: 'btn btn-danger'%>
            <% else %>
              <%= button_to 'フォロー', follow_public_user_relationships_path(user_id: user.id), method: :post, class: 'btn btn-primary' %>
            <% end %>
          <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
   <%= paginate @records, param_name: :search_page ,params: { search: params[:search], model: @model, content: @content } %>
  </div> 
  <% else %>
    <h3>Users no search </h3>
  <% end %>
<% end %>

